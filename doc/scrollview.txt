*scrollview.txt*   Plugin that displays (non-interactive) scrollbars
*nvim-scrollview*

Author: Daniel Steinberg - https://www.dannyadam.com
Web: https://github.com/dstein64/nvim-scrollview

1. Requirements                            |scrollview-requirements|
2. Installation                            |scrollview-installation|
3. Usage                                   |scrollview-usage|
4. Configuration                           |scrollview-configuration|
5. Issues                                  |scrollview-issues|

|nvim-scrollview| is a plugin that displays (non-interactive) scrollbars.
The plugin is customizable (see |scrollview-configuration|).

============================================================================
1. Requirements                            *scrollview-requirements*

* `nvim>=0.5`

============================================================================
2. Installation                            *scrollview-installation*

Use |packages| or one of the various package managers.

============================================================================
3. Usage                                   *scrollview-usage*

* |nvim-scrollview| works automatically, displaying (non-interactive)
  scrollbars.
* The *:ScrollViewDisable* command disables scrollbars.
* The *:ScrollViewEnable* command enables scrollbars. This is only necessary
  if scrollbars have previously been disabled.
* The *:ScrollViewRefresh* command refreshes the scrollbars. This is relevant
  when the scrollbars are out-of-sync, which can occur e.g., as a result of
  some window arrangement actions (see |scrollview-issues|).

============================================================================
4. Configuration                           *scrollview-configuration*

The following variables can be used to customize the behavior of
|nvim-scrollview|. Variables can be set at the 1) window, 2) tab, 3) buffer,
and/or 4) global scope, with that order of precedence (i.e., window variables
have the highest precedence, and global variables have the lowest).

`Variable`                                `Default`
  Description                             Info
-------------                           -------

*scrollview_on_startup*                   `1`
  Specifies whether scrollbars are        Considered only at global scope
  enabled on startup
*scrollview_mode*                         `'simple'`
  Specifies what the scrollbar            See |scrollview-modes| for details on
  position and size correspond to         the available modes
*scrollview_excluded_filetypes*           `[]`
  Optional file types for which
  scrollbars should not be displayed
*scrollview_current_only*                 `0`
  Specifies whether scrollbars should     Considered only at tab and global
  only be displayed in the current        scopes
  window
*scrollview_winblend*                     `50`
  Specifies the level of transparency     An integer between 0 (opaque) and
  for scrollbars                          100 (transparent)
*scrollview_base*                         `'right'`
  Specifies where the scrollbar is        `'left'` or `'right'` for corresponding
  anchored                                window edges, or `'buffer'` for buffer
*scrollview_column*                       `1`
  Specifies the scrollbar column          An integer greater than or equal
  (relative to |scrollview_base|)           to 1


The variables can be customized in your |init.vim|, as shown in the following
example.
 >
    let g:scrollview_excluded_filetypes = ['nerdtree']
    let g:scrollview_current_only = 1
    let g:scrollview_winblend = 75
    " Position the scrollbar at the 80th character of the buffer
    let g:scrollview_base = 'buffer'
    let g:scrollview_column = 80

Scrollview Modes ~
                                           *scrollview-modes*
The following modes are available for the |scrollview_mode| configuration
setting (set as a |string|). Without closed |folds|, all three modes work the
same way.

Mode       Description
----       -----------
*simple*     The scrollbar top position reflects the window's top line number
           relative to the document's line count. The scrollbar height reflects
           the size of the window relative to the document's line count.

*flexible*   The scrollbar height adapts to reflect the number of lines in the
           window, counting lines in closed folds, relative to the document's
           line count. The scrollbar top position reflects the window's top
           line number relative to the document's line count. The scrollbar
           bottom position reflects the window's bottom line number relative
           to the document's line count.

*virtual*    The scrollbar position and height are calculated similarly to
           the |simple| mode, but line numbers and the document line count
           are implicitly updated to virtual counterparts that account for
           closed folds. The scrollbar top position reflects the window's top
           virtual line number relative to the document's virtual line count.
           The scrollbar height reflects the size of the window relative to
           the document's virtual line count.

Color Customization ~
                                           *scrollview-color-customization*
The following highlight group can be configured to change |nvim-scrollview|'s
colors.

Name         Default   Description
----         -------   -----------
`ScrollView`   `Visual`    Color for the scrollbar

The highlight groups can be customized in your |init.vim|, as shown in the
following example.
 >
    " Link ScrollView highlight to Pmenu highlight
    highlight link ScrollView Pmenu

    " Specify custom highlighting for ScrollView
    highlight ScrollView ctermbg=159 guibg=LightCyan

============================================================================
5. Issues                                  *scrollview-issues*

* Scrollbars can become out-of-sync after window arrangement actions that are
  not followed by a scroll event. For example, this can be seen by starting
  `nvim`, issuing |:help|, then typing `<ctrl-w>J` to move the help window to
  the bottom of the screen. This could be resolved if there was an event that
  is triggered by the window arrangement actions. `:ScrollViewRefresh`, or
  scrolling can be used to refresh the scrollbars.
  - Workaround: Remap the problematic key sequences accordingly. >
    nnoremap <silent> <c-w>H <c-w>H:silent! ScrollViewRefresh<cr>
    nnoremap <silent> <c-w>J <c-w>J:silent! ScrollViewRefresh<cr>
    nnoremap <silent> <c-w>K <c-w>K:silent! ScrollViewRefresh<cr>
    nnoremap <silent> <c-w>L <c-w>L:silent! ScrollViewRefresh<cr>
<    This won't resolve the issue in all cases (e.g., when using `:wincmd`).

* Scrollbars become out-of-sync when the mouse wheel is used to scroll a
  non-current window. This is because the |WinScrolled| event only corresponds
  to the current window. The scrollbars can be refreshed with
  `:ScrollViewRefresh`, scrolling, or by changing the current window.
  - Workaround: Remap the problematic key sequences accordingly. >
    nnoremap <silent> <scrollwheelup>
          \ <scrollwheelup>:silent! ScrollViewRefresh<cr>
    nnoremap <silent> <scrollwheeldown>
          \ <scrollwheeldown>:silent! ScrollViewRefresh<cr>

* When attempting to close the last window in a tab with |:close| or
  `<ctrl-w>c`, with the scrollbar displayed, and at least one other tab, the
  following error is shown: >
    E5601: Cannot close window, only floating window would remain
<  Neovim Issue #11440 is the corresponding issue, opened November 23, 2019.
  - Workaround 1: Use |:quit|, |ZZ|, |ZQ|, or another command that quits the
    current window (as opposed to a window-closing command).
  - Workaround 2: Use |:only| or `<ctrl-w>o` on the last window of the tab,
    which has the side-effect of closing all floating windows (including
    scrollbars). A subsequent window-closing command works without error.
  - Workaround 3: Use |:tabclose|.
  - Workaround 4: Remap the problematic key sequence accordingly. >
    nnoremap <silent> <c-w>c
          \ :silent! ScrollViewDisable<cr>
          \ <c-w>c
          \ :silent! ScrollViewEnable<cr>
<    This won't resolve the issue in all cases (e.g., when using `:close` or
    `:wincmd`).

============================================================================
 vim:tw=78:ts=4:ft=help:norl:
